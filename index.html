<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MassHSHockey.com - Massachusetts High School Hockey</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Top Header -->
    <header class="top-header">
        <div class="top-header-content">
            <a href="#" class="site-title">MassHSHockey.com</a>
            <div class="header-links">
                <span style="color: rgba(255,255,255,0.6);">Historical Data Archive</span>
            </div>
        </div>
    </header>

    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="nav-content">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="teams">Teams</button>
                <button class="nav-tab" data-tab="games">Games</button>
                <button class="nav-tab" data-tab="players">Players</button>
                <button class="nav-tab" data-tab="standings">Standings</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="content-wrapper">
            <!-- Loading Indicator -->
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Loading data...</p>
            </div>

            <!-- Error Message -->
            <div id="error" class="error" style="display: none;">
                <p id="error-message"></p>
            </div>

            <!-- Filters -->
            <div class="filters" id="filters">
                <div class="filter-group">
                    <label for="season-filter">Season</label>
                    <select id="season-filter">
                        <option value="">All Seasons</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="gender-filter">Gender</label>
                    <select id="gender-filter">
                        <option value="">All</option>
                        <option value="M">Boys</option>
                        <option value="F">Girls</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="league-filter">League</label>
                    <select id="league-filter">
                        <option value="">All Leagues</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="division-filter">Division</label>
                    <select id="division-filter">
                        <option value="">All Divisions</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="team-filter">Team</label>
                    <select id="team-filter">
                        <option value="">All Teams</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="search">Search</label>
                    <input type="text" id="search" placeholder="Search...">
                </div>
            </div>

            <!-- Content Panels -->
            <div class="content">
                <!-- Teams Tab -->
                <div id="teams-panel" class="panel active">
                    <h1 class="page-title">Teams</h1>
                    <p class="page-subtitle">Select filters to view team records by season, league, and division.</p>

                    <!-- View Toggle -->
                    <div class="view-toggle">
                        <button class="view-toggle-btn active" data-view="table" onclick="app.switchTeamsView('table')">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 3h18v18H3V3zm16 16V5H5v14h14zM7 7h2v2H7V7zm0 4h2v2H7v-2zm0 4h2v2H7v-2zm4-8h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6v-2z"/></svg>
                            Table View
                        </button>
                        <button class="view-toggle-btn" data-view="cards" onclick="app.switchTeamsView('cards')">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 5h16v3H4V5zm0 5h16v3H4v-3zm0 5h16v3H4v-3z"/></svg>
                            Card View
                        </button>
                    </div>

                    <div class="stats-summary" id="teams-summary"></div>

                    <!-- Table View -->
                    <div id="teams-table-view" class="teams-view active">
                        <div class="table-container">
                            <div class="table-info">
                                <span>Showing <span id="teams-showing">0</span> of <span id="teams-total">0</span> Results</span>
                            </div>
                            <table id="teams-table">
                                <thead>
                                    <tr>
                                        <th class="sortable" data-sort="team_name" data-table="teams">Team</th>
                                        <th class="sortable" data-sort="league_name" data-table="teams">League</th>
                                        <th class="sortable" data-sort="division_name" data-table="teams">Division</th>
                                        <th class="sortable text-center" data-sort="wins" data-table="teams">W</th>
                                        <th class="sortable text-center" data-sort="losses" data-table="teams">L</th>
                                        <th class="sortable text-center" data-sort="ties" data-table="teams">T</th>
                                        <th class="sortable text-center" data-sort="goals_for" data-table="teams">GF</th>
                                        <th class="sortable text-center" data-sort="goals_against" data-table="teams">GA</th>
                                        <th class="sortable text-center" data-sort="points" data-table="teams">Pts</th>
                                        <th class="sortable text-center" data-sort="win_pct" data-table="teams">Win%</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <div class="pagination" id="teams-pagination"></div>
                        </div>
                    </div>

                    <!-- Card View -->
                    <div id="teams-cards-view" class="teams-view" style="display: none;">
                        <div class="team-cards-container">
                            <div class="cards-info">
                                <span>Showing <span id="cards-showing">0</span> of <span id="cards-total">0</span> Results</span>
                            </div>
                            <div id="teams-cards-list"></div>
                        </div>
                        <div class="pagination" id="cards-pagination"></div>
                    </div>
                </div>

                <!-- Games Tab -->
                <div id="games-panel" class="panel">
                    <h1 class="page-title">Games</h1>
                    <p class="page-subtitle">View game results and scores.</p>
                    <div class="stats-summary" id="games-summary"></div>
                    <div class="table-container">
                        <div class="table-info">
                            <span>Showing <span id="games-showing">0</span> of <span id="games-total">0</span> Results</span>
                        </div>
                        <table id="games-table">
                            <thead>
                                <tr>
                                    <th class="sortable" data-sort="date" data-table="games">Date</th>
                                    <th class="sortable" data-sort="home_team" data-table="games">Home Team</th>
                                    <th class="sortable" data-sort="away_team" data-table="games">Away Team</th>
                                    <th class="sortable text-center" data-sort="home_score" data-table="games">Score</th>
                                    <th class="sortable" data-sort="venue" data-table="games">Venue</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div class="pagination" id="games-pagination"></div>
                    </div>
                </div>

                <!-- Players Tab -->
                <div id="players-panel" class="panel">
                    <h1 class="page-title">Player Statistics</h1>
                    <p class="page-subtitle">View player statistics by season. Click a player for details.</p>

                    <!-- Sub-tabs for Skaters/Goalies -->
                    <div class="sub-tabs">
                        <button class="sub-tab active" data-subtab="skaters">Skaters</button>
                        <button class="sub-tab" data-subtab="goalies">Goalies</button>
                    </div>

                    <div class="stats-summary" id="players-summary"></div>

                    <!-- Skaters Table -->
                    <div id="skaters-panel" class="sub-panel active">
                        <div class="table-container">
                            <div class="table-info" id="skaters-info">
                                <span>Showing <span id="skaters-showing">0</span> of <span id="skaters-total">0</span> Results</span>
                            </div>
                            <table id="skaters-table">
                                <thead>
                                    <tr>
                                        <th class="text-center">Rank</th>
                                        <th class="sortable" data-sort="name" data-table="skaters">Name</th>
                                        <th class="sortable" data-sort="team_name" data-table="skaters">School</th>
                                        <th class="sortable text-center" data-sort="year" data-table="skaters">Year</th>
                                        <th class="sortable text-center" data-sort="position" data-table="skaters">Position</th>
                                        <th class="sortable" data-sort="hometown" data-table="skaters">Hometown</th>
                                        <th class="sortable text-center" data-sort="goals" data-table="skaters">Goals</th>
                                        <th class="sortable text-center" data-sort="assists" data-table="skaters">Assists</th>
                                        <th class="sortable text-center" data-sort="points" data-table="skaters">Points</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <div class="pagination" id="skaters-pagination"></div>
                        </div>
                    </div>

                    <!-- Goalies Table -->
                    <div id="goalies-panel" class="sub-panel">
                        <div class="table-container">
                            <div class="table-info" id="goalies-info">
                                <span>Showing <span id="goalies-showing">0</span> of <span id="goalies-total">0</span> Results</span>
                                <span class="table-note">Leading goaltenders ranking is based on having played in 25% of the team's games</span>
                            </div>
                            <table id="goalies-table">
                                <thead>
                                    <tr>
                                        <th class="text-center">Rank</th>
                                        <th class="sortable" data-sort="name" data-table="goalies">Name</th>
                                        <th class="sortable text-center" data-sort="year" data-table="goalies">Year</th>
                                        <th class="sortable text-center" data-sort="position" data-table="goalies">Position</th>
                                        <th class="sortable" data-sort="hometown" data-table="goalies">Hometown</th>
                                        <th class="sortable text-center" data-sort="games_played" data-table="goalies">GP</th>
                                        <th class="sortable text-center" data-sort="goals_against" data-table="goalies">GA</th>
                                        <th class="sortable text-center" data-sort="goals_against_average" data-table="goalies">GAA</th>
                                        <th class="sortable text-center" data-sort="shots" data-table="goalies">Shots</th>
                                        <th class="sortable text-center" data-sort="saves" data-table="goalies">Saves</th>
                                        <th class="sortable text-center" data-sort="save_percentage" data-table="goalies">Save%</th>
                                        <th class="sortable text-center" data-sort="shutouts" data-table="goalies">SO</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <div class="pagination" id="goalies-pagination"></div>
                        </div>
                    </div>
                </div>

                <!-- Standings Tab -->
                <div id="standings-panel" class="panel">
                    <h1 class="page-title">League Standings</h1>
                    <p class="page-subtitle">Standings organized by division and league.</p>
                    <div id="standings-container"></div>
                </div>

                <!-- Team Page (Direct Link View) -->
                <div id="team-page-panel" class="panel team-page">
                    <a href="#" class="back-link" onclick="app.goBackToTeams(); return false;">&larr; Back to All Teams</a>

                    <!-- Team Header -->
                    <div class="team-page-header">
                        <div class="team-page-icon" id="team-page-icon">A</div>
                        <div class="team-page-info">
                            <h1 id="team-page-name">Team Name</h1>
                            <div class="team-page-meta">
                                <div class="meta-row">
                                    <span class="meta-label">League:</span>
                                    <span class="meta-value" id="team-page-league">-</span>
                                </div>
                                <div class="meta-row">
                                    <span class="meta-label">Division:</span>
                                    <span class="meta-value" id="team-page-division">-</span>
                                </div>
                                <div class="meta-row">
                                    <span class="meta-label">Gender:</span>
                                    <span class="meta-value" id="team-page-gender">-</span>
                                </div>
                            </div>
                        </div>
                        <div class="team-page-season-select">
                            <label for="team-page-season">Season:</label>
                            <select id="team-page-season" onchange="app.changeTeamPageSeason()"></select>
                        </div>
                    </div>

                    <!-- Team Page Tabs -->
                    <div class="team-page-tabs">
                        <button class="team-page-tab active" data-tab="record" onclick="app.switchTeamPageTab('record')">Record</button>
                        <button class="team-page-tab" data-tab="roster" onclick="app.switchTeamPageTab('roster')">Roster</button>
                        <button class="team-page-tab" data-tab="schedule" onclick="app.switchTeamPageTab('schedule')">Schedule</button>
                    </div>

                    <!-- Record Tab -->
                    <div id="team-page-record" class="team-page-content active">
                        <div class="team-record-cards" id="team-page-record-cards">
                            <!-- Record cards will be populated by JS -->
                        </div>
                    </div>

                    <!-- Roster Tab -->
                    <div id="team-page-roster" class="team-page-content">
                        <h3>Team Members</h3>
                        <div class="team-page-table-container">
                            <table class="team-page-table" id="team-page-roster-table">
                                <thead id="team-page-roster-thead">
                                    <!-- Header populated by JS -->
                                </thead>
                                <tbody id="team-page-roster-tbody">
                                    <!-- Rows populated by JS -->
                                </tbody>
                                <tfoot id="team-page-roster-tfoot">
                                    <!-- Totals populated by JS -->
                                </tfoot>
                            </table>
                        </div>
                    </div>

                    <!-- Schedule Tab -->
                    <div id="team-page-schedule" class="team-page-content">
                        <h3>Schedule & Results</h3>
                        <div class="team-page-table-container">
                            <table class="team-page-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Opponent</th>
                                        <th class="text-center">Result</th>
                                        <th class="text-center">Score</th>
                                        <th>Location</th>
                                    </tr>
                                </thead>
                                <tbody id="team-page-schedule-tbody">
                                    <!-- Rows populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">MassHSHockey.com</div>
                <p>Preserving Massachusetts High School Hockey history.</p>
                <span class="footer-tagline">Promoting Hockey Past & Present!</span>
            </div>
            <div class="footer-section">
                <h4>About</h4>
                <p>This is a historical data archive from the original masshshockey.com website.</p>
                <p>Data covers seasons from 2008-2019.</p>
            </div>
            <div class="footer-section">
                <h4>Data</h4>
                <p>Teams: 3,212 records</p>
                <p>Games: 35,018 results</p>
                <p>Players: 49,083 statistics</p>
            </div>
        </div>
        <div class="footer-bottom">
            Copyright &copy; 2019 masshshockey.com | Historical Archive
        </div>
    </footer>

    <!-- Player Detail Modal -->
    <div id="player-modal" class="modal" style="display: none;">
        <div class="modal-content modal-player">
            <div class="modal-header">
                <button class="modal-close" onclick="app.closePlayerModal()">&times;</button>
            </div>

            <!-- Player Profile Header -->
            <div class="player-profile-header">
                <div class="player-profile-icon" id="modal-player-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                </div>
                <div class="player-profile-info">
                    <h2 id="modal-player-name">Player Name</h2>
                    <div class="player-profile-team">
                        Team: <a href="javascript:void(0)" id="modal-player-team-link" onclick="app.viewPlayerTeam()"><span id="modal-player-team"></span></a>
                    </div>
                </div>
                <div class="player-profile-stats">
                    <div class="profile-stat">
                        <span class="profile-stat-value" id="modal-player-number">-</span>
                        <span class="profile-stat-label">Number</span>
                    </div>
                    <div class="profile-stat-divider"></div>
                    <div class="profile-stat">
                        <span class="profile-stat-value" id="modal-player-position">-</span>
                        <span class="profile-stat-label">Position</span>
                    </div>
                    <div class="profile-stat-divider"></div>
                    <div class="profile-stat">
                        <span class="profile-stat-value" id="modal-player-year">-</span>
                        <span class="profile-stat-label">Year</span>
                    </div>
                    <div class="profile-stat-divider"></div>
                    <div class="profile-stat">
                        <span class="profile-stat-value" id="modal-player-hometown">-</span>
                        <span class="profile-stat-label">Hometown</span>
                    </div>
                </div>
            </div>

            <!-- Player History Section -->
            <div class="player-history-section">
                <h3>Player History</h3>
                <div class="player-history-table-container">
                    <table class="player-history-table" id="player-history-table">
                        <thead id="player-history-thead">
                            <!-- Header will be populated by JS based on skater/goalie -->
                        </thead>
                        <tbody id="player-history-tbody">
                            <!-- Rows will be populated by JS -->
                        </tbody>
                        <tfoot id="player-history-tfoot">
                            <!-- Totals row will be populated by JS -->
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Team Detail Modal -->
    <div id="team-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-team-name">Team Name</h2>
                <button class="modal-close" onclick="app.closeTeamModal()">&times;</button>
            </div>
            <div class="modal-subheader">
                <span id="modal-team-league"></span> | <span id="modal-team-division"></span>
            </div>
            <div class="modal-season-selector">
                <label for="modal-season-filter">Season:</label>
                <select id="modal-season-filter" onchange="app.changeTeamModalSeason()"></select>
            </div>
            <div class="modal-record" id="modal-team-record"></div>

            <div class="modal-tabs">
                <button class="modal-tab active" data-modal-tab="roster">Roster</button>
                <button class="modal-tab" data-modal-tab="schedule">Schedule</button>
            </div>

            <div id="modal-roster" class="modal-panel active">
                <table class="modal-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Pos</th>
                            <th>Year</th>
                            <th>G</th>
                            <th>A</th>
                            <th>Pts</th>
                            <th>GAA</th>
                            <th>SV%</th>
                        </tr>
                    </thead>
                    <tbody id="modal-roster-body"></tbody>
                </table>
            </div>

            <div id="modal-schedule" class="modal-panel">
                <table class="modal-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Opponent</th>
                            <th>Result</th>
                            <th>Score</th>
                            <th>Location</th>
                        </tr>
                    </thead>
                    <tbody id="modal-schedule-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="data-loader.js"></script>
    <script src="app.js"></script>
</body>
</html>
